# README

Тестовове задание: Поиск ближайших банкоматов.

> Написать программу которая будет рассчитывать расчетное расстояние до ближайших банкоматов.
У тебя есть банкоматы, которые имеют параметры широты и долготы. Есть возможность их добавлять и удалять.
Есть клиентский запрос с координатами(тоже широта и долгота).
На выводе должен быть список допустим 5 ближайших банкоматов. Маршруты до них не нужны, считаем просто по прямой. 
Нужны спеки.
Доп задача: как можно кэшировать результаты так чтобы каждый раз не лезть в хранилище по тем же вводным?

* Демо https://search-atm-rkb.herokuapp.com/
* Проект подключен к сервису Travis-CI [![Build Status](https://travis-ci.org/khataev/search-atm-rkb.svg?branch=master)](https://travis-ci.org/khataev/search-atm-rkb)
* Как и договаривались, сервис по писку 5 ближайших банкоматов "дорогой" ресурс, поэтому результаты кешируются
* При поиске с теми же координатами данные подтянутся из кеша
* Алгоритм инвалидации кеша: при добавлении или удалении банкомата ищем в кеше координаты ключей (координат предыдущих 
поисков) в заданном радиусе от данного банкомата. Найденные - удаляем. Соответственно при повторном поиске по этим 
координатам будет обращение к сервису в обход кеша и новый/удаленный банкомат может появиться/пропасть в результатах 
поиска если он будет ближе к положению клиента чем ранее выбранные. То есть при изменении БД банкоматов обновляются
только определенные данные (релевантные к изменениям), а не весь кеш, что так же сокращает нагрузку на внешний сервис.
* Текущий радиус инвалидации кеша - 1км
* Кеширование простейшее, в памяти процесса. На сервере с несколькими экземплярами приложений естественно лучше 
использовать что-нибудь типа memcached + Rails.cache

